{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/shallow-equal/arrays/index.js","webpack:///./node_modules/shallow-equal/objects/index.js","webpack:///./src/js/app.jsx","webpack:///./src/js/components/Generic.jsx","webpack:///./src/js/components/JBItem.jsx","webpack:///./src/js/components/Main.jsx","webpack:///./src/js/components/TheThing.jsx"],"names":["console","log","app","Main","React","createRef","init","root","document","getElementById","ReactDOM","render","jb","window","theThing","shallowEqualObjects","require","shallowEqualArrays","shallowCompare","thing1","thing2","Array","isArray","Debugger","name","component","more","toString","thing","JSON","prune","state","props","Button","text","onClick","createElement","provideTests","comp","index","addTest","callback","more_props","push","e","renderTests","DEFAULT_MAX_DEPTH","DEFAULT_ARRAY_MAX_LENGTH","DEFAULT_PRUNED_VALUE","seen","iterator","forEachEnumerableOwnProperty","obj","k","Object","prototype","hasOwnProperty","call","forEachEnumerableProperty","forEachProperty","excluded","getOwnPropertyNames","forEach","getPrototypeOf","defineProperty","Date","value","toJSON","cx","escapable","meta","quote","string","lastIndex","test","replace","a","c","charCodeAt","slice","depthDecr","arrayMaxLength","prunedString","replacer","options","allProperties","inheritedProperties","str","key","holder","i","v","length","partial","toPrunedJSON","isFinite","String","indexOf","replacement","undefined","apply","Math","min","join","map","arguments","parse","module","exports","JBReflection","json","of","getJson","stringify","Component","JBItem","orderedChildComponents","children","child","childRefs","getKey","isRoot","r","current","keysAreOrdered","counter","cc","ret","f","getUid","assign","_key","iValue","iKey","updateReflection","parent","forceUpdate","reflection","lastUid","p","type","mountedComponent","Controls","memo","add","addChild","del","deleteSelf","primitive","arr","hide","display","paddingLeft","item","TheThing","things","filter","x","dir","thingRefs","reflectionRefs","Generic","insert","ctx","getContext","moveTo","lineTo","stroke","position","width","height","border","ele","margin","AThing","pos","next","random","edges","abs","startX","startY","y","onInit","interval","steps","setInterval","rand","clearInterval","getLinked","bottom","left","borderRadius","transition","background","Reflection","fontSize"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/app.jsx\");\n","module.exports = function shallowEqualArrays(arrA, arrB) {\n  if (arrA === arrB) {\n    return true;\n  }\n\n  if (!arrA || !arrB) {\n    return false;\n  }\n\n  var len = arrA.length;\n\n  if (arrB.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (arrA[i] !== arrB[i]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","module.exports = function shallowEqualObjects(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  var aKeys = Object.keys(objA);\n  var bKeys = Object.keys(objB);\n  var len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    var key = aKeys[i];\n\n    if (objA[key] !== objB[key]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","// import React, { Component } from 'react';\r\n// import React, { useState } from 'react';\r\n\r\nimport Main from './components/Main';\r\nimport JBItem from './components/JBItem';\r\n\r\n(function () {\r\n\r\n    console.log(\"App.jsx\");\r\n\r\n    let app = {};\r\n\r\n    app.Main = React.createRef();\r\n\r\n    app.init = function () {\r\n\r\n        const root = document.getElementById('app-root');\r\n\r\n        if (root) {\r\n            ReactDOM.render(<Main />, root);\r\n        }\r\n\r\n        const jb = document.getElementById('json-builder');\r\n\r\n        if (jb) {\r\n            ReactDOM.render(<JBItem isRoot={1} />, jb);\r\n        }\r\n\r\n    };\r\n\r\n    window.theThing = app;\r\n    window.theThing.init();\r\n\r\n}());","let shallowEqualObjects = require(\"shallow-equal/objects\");\r\nlet shallowEqualArrays = require(\"shallow-equal/arrays\");\r\n\r\nconst shallowCompare = function( thing1, thing2 ){\r\n\r\n    if ( Array.isArray( thing1 ) && Array.isArray( thing2 ) ) {\r\n\r\n        return shallowEqualArrays( thing1, thing2 );\r\n\r\n    } else if ( typeof( thing1 ) === 'object' && typeof( thing2 ) === 'object' && thing1 !== null && thing2 !== null ) {\r\n\r\n        return shallowEqualObjects( thing1, thing2 );\r\n\r\n    }\r\n\r\n    // not sure what a good fallback is but I think this is fine...\r\n    // although, i don't think === is reliable on arrays and objects...\r\n    return thing1 === thing2 || null;\r\n};\r\n\r\nconst Debugger = function( name, component, more ){\r\n\r\n    const toString = ( thing ) => {\r\n        // JSON.stringify throws errors when encountering recursion\r\n        // return vuvuzela.stringify( thing );\r\n        // return dump( thing );\r\n        return JSON.prune( thing, 2, 20 );\r\n    };\r\n\r\n    return (\r\n        <div className=\"debugger\">\r\n            <p>{name} State: {toString(component.state)}</p>\r\n            <p>{name} Props: {toString(component.props)}</p>\r\n            <p>{name} More: {toString(more)}</p>\r\n        </div>\r\n    );\r\n};\r\n\r\n// classList\r\n// const wordsWithSpaces = function( words ){\r\n//     // words = words || [];\r\n//     words = words.constructor === Array ? words : [];\r\n//     return words.filter( (word) => { return word || false } ).join( \" \" );\r\n// };\r\n\r\nconst Button = function( text, onClick, props ){\r\n    props = props || {};\r\n    props.onClick = props.onClick || onClick;\r\n    return React.createElement( 'button', props, text );\r\n};\r\n\r\nconst provideTests = function( comp ){\r\n\r\n    var index = 'testProvider_tests';\r\n\r\n    comp.addTest = ( name, callback, more_props ) => {\r\n        comp[index] = comp[index] || [];\r\n        comp[index].push(Button( name, (e) => {\r\n            console.log(\"Test: \" + name );\r\n            callback(e);\r\n        }, more_props ));\r\n    };\r\n\r\n    comp.renderTests = () => {\r\n        return ( <p className=\"tests\">Tests: {comp[index]}</p> );\r\n    };\r\n};\r\n\r\n// JSON.prune : a function to stringify any object without overflow\r\n// two additional optional parameters :\r\n//   - the maximal depth (default : 6)\r\n//   - the maximal length of arrays (default : 50)\r\n// You can also pass an \"options\" object.\r\n// examples :\r\n//   var json = JSON.prune(window)\r\n//   var arr = Array.apply(0,Array(1000)); var json = JSON.prune(arr, 4, 20)\r\n//   var json = JSON.prune(window.location, {inheritedProperties:true})\r\n// Web site : http://dystroy.org/JSON.prune/\r\n// JSON.prune on github : https://github.com/Canop/JSON.prune\r\n// This was discussed here : http://stackoverflow.com/q/13861254/263525\r\n// The code is based on Douglas Crockford's code : https://github.com/douglascrockford/JSON-js/blob/master/json2.js\r\n// No effort was done to support old browsers. JSON.prune will fail on IE8.\r\n(function () {\r\n    'use strict';\r\n\r\n    var DEFAULT_MAX_DEPTH = 6;\r\n    var DEFAULT_ARRAY_MAX_LENGTH = 50;\r\n    var DEFAULT_PRUNED_VALUE = '\"-pruned-\"';\r\n    var seen; // Same variable used for all stringifications\r\n    var iterator; // either forEachEnumerableOwnProperty, forEachEnumerableProperty or forEachProperty\r\n\r\n    // iterates on enumerable own properties (default behavior)\r\n    var forEachEnumerableOwnProperty = function(obj, callback) {\r\n        for (var k in obj) {\r\n            if (Object.prototype.hasOwnProperty.call(obj, k)) callback(k);\r\n        }\r\n    };\r\n    // iterates on enumerable properties\r\n    var forEachEnumerableProperty = function(obj, callback) {\r\n        for (var k in obj) callback(k);\r\n    };\r\n    // iterates on properties, even non enumerable and inherited ones\r\n    // This is dangerous\r\n    var forEachProperty = function(obj, callback, excluded) {\r\n        if (obj==null) return;\r\n        excluded = excluded || {};\r\n        Object.getOwnPropertyNames(obj).forEach(function(k){\r\n            if (!excluded[k]) {\r\n                callback(k);\r\n                excluded[k] = true;\r\n            }\r\n        });\r\n        forEachProperty(Object.getPrototypeOf(obj), callback, excluded);\r\n    };\r\n\r\n    Object.defineProperty(Date.prototype, \"toPrunedJSON\", {value:Date.prototype.toJSON});\r\n\r\n    var\tcx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\r\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\r\n        meta = {\t// table of character substitutions\r\n            '\\b': '\\\\b',\r\n            '\\t': '\\\\t',\r\n            '\\n': '\\\\n',\r\n            '\\f': '\\\\f',\r\n            '\\r': '\\\\r',\r\n            '\"' : '\\\\\"',\r\n            '\\\\': '\\\\\\\\'\r\n        };\r\n\r\n    function quote(string) {\r\n        escapable.lastIndex = 0;\r\n        return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\r\n            var c = meta[a];\r\n            return typeof c === 'string'\r\n                ? c\r\n                : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\r\n        }) + '\"' : '\"' + string + '\"';\r\n    }\r\n\r\n\r\n    var prune = function (value, depthDecr, arrayMaxLength) {\r\n        var prunedString = DEFAULT_PRUNED_VALUE;\r\n        var replacer;\r\n        if (typeof depthDecr == \"object\") {\r\n            var options = depthDecr;\r\n            depthDecr = options.depthDecr;\r\n            arrayMaxLength = options.arrayMaxLength;\r\n            iterator = options.iterator || forEachEnumerableOwnProperty;\r\n            if (options.allProperties) iterator = forEachProperty;\r\n            else if (options.inheritedProperties) iterator = forEachEnumerableProperty\r\n            if (\"prunedString\" in options) {\r\n                prunedString = options.prunedString;\r\n            }\r\n            if (options.replacer) {\r\n                replacer = options.replacer;\r\n            }\r\n        } else {\r\n            iterator = forEachEnumerableOwnProperty;\r\n        }\r\n        seen = [];\r\n        depthDecr = depthDecr || DEFAULT_MAX_DEPTH;\r\n        arrayMaxLength = arrayMaxLength || DEFAULT_ARRAY_MAX_LENGTH;\r\n        function str(key, holder, depthDecr) {\r\n            var i, k, v, length, partial, value = holder[key];\r\n\r\n            if (value && typeof value === 'object' && typeof value.toPrunedJSON === 'function') {\r\n                value = value.toPrunedJSON(key);\r\n            }\r\n            if (value && typeof value.toJSON === 'function') {\r\n                value = value.toJSON();\r\n            }\r\n\r\n            switch (typeof value) {\r\n                case 'string':\r\n                    return quote(value);\r\n                case 'number':\r\n                    return isFinite(value) ? String(value) : 'null';\r\n                case 'boolean':\r\n                case 'null':\r\n                    return String(value);\r\n                case 'object':\r\n                    if (!value) {\r\n                        return 'null';\r\n                    }\r\n                    if (depthDecr<=0 || seen.indexOf(value)!==-1) {\r\n                        if (replacer) {\r\n                            var replacement = replacer(value, prunedString, true);\r\n                            return replacement===undefined ? undefined : ''+replacement;\r\n                        }\r\n                        return prunedString;\r\n                    }\r\n                    seen.push(value);\r\n                    partial = [];\r\n                    if (Object.prototype.toString.apply(value) === '[object Array]') {\r\n                        length = Math.min(value.length, arrayMaxLength);\r\n                        for (i = 0; i < length; i += 1) {\r\n                            partial[i] = str(i, value, depthDecr-1) || 'null';\r\n                        }\r\n                        v = '[' + partial.join(',') + ']';\r\n                        if (replacer && value.length>arrayMaxLength) return replacer(value, v, false);\r\n                        return v;\r\n                    }\r\n                    iterator(value, function(k) {\r\n                        try {\r\n                            v = str(k, value, depthDecr-1);\r\n                            if (v) partial.push(quote(k) + ':' + v);\r\n                        } catch (e) {\r\n                            // this try/catch due to forbidden accessors on some objects\r\n                        }\r\n                    });\r\n                    return '{' + partial.join(',') + '}';\r\n                case 'function':\r\n                case 'undefined':\r\n                    return replacer ? replacer(value, undefined, false) : undefined;\r\n            }\r\n        }\r\n        return str('', {'': value}, depthDecr);\r\n    };\r\n\r\n    prune.log = function() {\r\n        console.log.apply(console, Array.prototype.map.call(arguments, function(v) {\r\n            return JSON.parse(JSON.prune(v));\r\n        }));\r\n    };\r\n    prune.forEachProperty = forEachProperty; // you might want to also assign it to Object.forEachProperty\r\n\r\n    JSON.prune = prune;\r\n}());\r\n\r\nmodule.exports = {\r\n    Debugger: Debugger,\r\n    Button: Button,\r\n    provideTests: provideTests,\r\n    shallowCompare: shallowCompare,\r\n};","class JBReflection extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.json = {};\r\n    }\r\n\r\n    render() {\r\n\r\n        this.json = this.props.of.getJson();\r\n\r\n        return (\r\n            <div className=\"jb-reflection\">\r\n                {JSON.stringify(this.json)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default class JBItem extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.isRoot = this.props.isRoot || false;\r\n        this.reflection = React.createRef();\r\n        this.lastUid = 0;\r\n\r\n        this.r = {\r\n            key: React.createRef(),\r\n            value: React.createRef(),\r\n        };\r\n\r\n        this.parent = this.isRoot ? this : this.props.p;\r\n\r\n        this.type = this.props.type || 0;\r\n\r\n        if ( this.isRoot ) {\r\n            this.type = this.props.type || 1;\r\n        }\r\n\r\n        // define only in root\r\n        this.f = this.props.f || {\r\n                root: this,\r\n                getUid: function (mountedComponent) {\r\n                    mountedComponent.lastUid++;\r\n                    return \"_\" + mountedComponent.lastUid;\r\n                }\r\n            };\r\n\r\n        this.children = [];\r\n        this.childRefs = {};\r\n\r\n        this.Controls = React.memo((props) => {\r\n\r\n            let add = (e) => {\r\n                this.addChild();\r\n                this.forceUpdate();\r\n            };\r\n\r\n            let del = (e) => {\r\n                this.deleteSelf();\r\n            };\r\n\r\n            let primitive = (e) => {\r\n                this.type = 0;\r\n                this.forceUpdate();\r\n            };\r\n\r\n            let arr = (e) => {\r\n                this.type = 1;\r\n                this.forceUpdate();\r\n            };\r\n\r\n            let obj = (e) => {\r\n                this.type = 2;\r\n                this.forceUpdate();\r\n            };\r\n\r\n            return (\r\n                <div className=\"jb-controls\">\r\n                    <span onClick={add}>add</span>\r\n                    {` `}\r\n                    <span onClick={del}>del</span>\r\n                    {` `}\r\n                    {!this.isRoot && (\r\n                        <>\r\n                        <span onClick={primitive}>P</span>\r\n                        {` `}\r\n                        </>\r\n                    )}\r\n                    <span onClick={arr}>A</span>\r\n                    {` `}\r\n                    <span onClick={obj}>O</span>\r\n                </div>\r\n            );\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.parent) {\r\n            if (this.parent.childRefs[this.props._key]) {\r\n                delete this.parent.childRefs[this.props._key];\r\n            }\r\n        }\r\n    }\r\n\r\n    getJson = () => {\r\n\r\n        let orderedChildComponents = [];\r\n\r\n        this.children.forEach(child => {\r\n            let c = this.childRefs[child.key];\r\n            if (c) {\r\n                orderedChildComponents.push({\r\n                    key: c.getKey(),\r\n                    comp: c\r\n                });\r\n            }\r\n        });\r\n\r\n        console.log(orderedChildComponents);\r\n\r\n        if (orderedChildComponents.length < 1) {\r\n\r\n            if (this.isRoot) {\r\n                return {};\r\n            }\r\n\r\n            if (this.r.value.current) {\r\n                return this.r.value.current.value;\r\n            }\r\n        }\r\n\r\n        let keysAreOrdered = true;\r\n\r\n        let counter = 0;\r\n\r\n        orderedChildComponents.forEach(cc => {\r\n            if (cc.key != counter) {\r\n                keysAreOrdered = false;\r\n            }\r\n            counter++;\r\n        });\r\n\r\n        let ret;\r\n\r\n        console.log('keys...', keysAreOrdered);\r\n\r\n        if (keysAreOrdered) {\r\n\r\n            ret = [];\r\n\r\n            orderedChildComponents.forEach(cc => {\r\n                ret.push(cc.comp.getJson());\r\n            });\r\n\r\n        } else {\r\n\r\n            ret = {};\r\n\r\n            orderedChildComponents.forEach(cc => {\r\n                ret[cc.key] = cc.comp.getJson();\r\n            });\r\n        }\r\n\r\n        return ret;\r\n    };\r\n\r\n    addChild = (props = {}) => {\r\n        let key = this.f.getUid(this);\r\n        this.children.push(Object.assign({\r\n            key: key,\r\n            _key: key,\r\n            iValue: \"\",\r\n            iKey: this.children.length\r\n        }, props));\r\n        this.updateReflection();\r\n    };\r\n\r\n    deleteSelf = () => {\r\n\r\n        if (this.isRoot) {\r\n            return;\r\n        }\r\n\r\n        delete this.parent.children[this.props.index];\r\n\r\n        if (this.parent.childRefs[this.props._key]) {\r\n            delete this.parent.childRefs[this.props._key]\r\n        }\r\n\r\n        this.parent.forceUpdate();\r\n    };\r\n\r\n    getKey = () => {\r\n        return this.r.key.current && this.r.key.current.value;\r\n    };\r\n\r\n    getValue = () => {\r\n        return this.r.value.current && this.r.value.current.value;\r\n    };\r\n\r\n    updateReflection = () => {\r\n        if (this.f.root.reflection.current) {\r\n            this.f.root.reflection.current.forceUpdate();\r\n        }\r\n    };\r\n\r\n    render() {\r\n\r\n        console.log(\"ItemRender\", this );\r\n\r\n        let hide = {display: \"none\"};\r\n\r\n        if ( this.isRoot && this.type === 0 ) {\r\n            this.type = 2;\r\n        }\r\n\r\n        if ( this.children.length === 0 ) {\r\n            if ( this.type === 1 || this.type === 2 ) {\r\n                this.addChild();\r\n            }\r\n        } else {\r\n            if ( this.type === 0 ) {\r\n                this.type = 2;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <>\r\n            {this.isRoot && (\r\n                <JBReflection of={this} ref={this.reflection}/>\r\n            )}\r\n            <div className=\"jb-item\" style={{\r\n                paddingLeft: \"20px\",\r\n            }}>\r\n                <this.Controls dep1={this.index} dep2={this.type} />\r\n                {this.isRoot && (\r\n                    <p>Root</p>\r\n                )}\r\n                {!this.isRoot && (\r\n                    <>\r\n                    {this.parent && this.parent.type === 1 && (\r\n                        <span>{this.index}</span>\r\n                    )}\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"key\"\r\n                        placeholder=\"key\"\r\n                        ref={this.r.key}\r\n                        onChange={this.updateReflection}\r\n                        style={this.parent && this.parent.type === 1 ? hide : {}}\r\n                    />\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"value\"\r\n                        placeholder=\"value\"\r\n                        ref={this.r.value}\r\n                        onChange={this.updateReflection}\r\n                        style={this.type === 1 || this.type === 2 ? hide : {}}\r\n                    />\r\n                    </>\r\n                )}\r\n                <span>{` `}{this.type} - {this.children.length}</span>\r\n                {(this.type === 1 || this.type === 2) && this.children.map((item, index) => <JBItem p={this} f={this.f} index={index} {...item} />)}\r\n            </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        if (this.parent) {\r\n            this.parent.childRefs[this.props._key] = this;\r\n        }\r\n\r\n        console.log('mount', this.r);\r\n\r\n        if (!this.isRoot) {\r\n            this.r.key.current.value = this.props.iKey;\r\n            this.r.value.current.value = this.props.iValue;\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nimport TheThing from './TheThing';\r\n\r\nexport default class Main extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <>\r\n            <p>Main...</p>\r\n            <TheThing />\r\n            </>\r\n        );\r\n    }\r\n\r\n}","// import AThing from './AThing';\r\nimport Generic from './Generic';\r\n\r\nexport default class TheThing extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.key = 0;\r\n\r\n        this.things = [];\r\n\r\n        for (let x = 0; x < 2; x++) {\r\n            this.things.push({\r\n                key: this.getKey()\r\n            });\r\n        }\r\n\r\n        this.dir = 1;\r\n\r\n        this.thingRefs = {};\r\n        this.reflectionRefs = {};\r\n\r\n        this.c = React.createRef();\r\n\r\n        Generic.provideTests(this);\r\n\r\n        this.addTest('Add', () => {\r\n            this.insert();\r\n            this.forceUpdate();\r\n        });\r\n\r\n        this.addTest('Minus', () => {\r\n            this.del();\r\n            this.forceUpdate();\r\n        });\r\n    }\r\n\r\n    del = () => {\r\n        this.things = this.things.filter((thing, index) => {\r\n            return index !== 0;\r\n        }).map((thing, index) => {\r\n            thing.index = index;\r\n            return thing;\r\n        });\r\n    };\r\n\r\n    insert = (props = {}) => {\r\n        this.things.push(Object.assign({}, {\r\n            key: this.getKey()\r\n        }, props));\r\n    };\r\n\r\n    getKey = () => {\r\n        this.key++;\r\n        return this.key;\r\n    };\r\n\r\n    componentDidMount() {\r\n\r\n        console.log(this.c);\r\n        console.dir(this.c);\r\n        let ctx = this.c.getContext(\"2d\");\r\n        ctx.moveTo(0, 0);\r\n        ctx.lineTo(200, 100);\r\n        ctx.stroke();\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n            {this.renderTests()}\r\n            <div className=\"the-thing\" style={{\r\n                position: 'relative',\r\n                width: '800px',\r\n                height: '800px',\r\n                border: '2px solid blue',\r\n            }}>\r\n                {this.things.map((thing, index) => {\r\n                    return ( <AThing\r\n                        {...thing}\r\n                        key={thing.key}\r\n                        parent={this}\r\n                        _key={thing.key}\r\n                        index={index}\r\n                        onInit={ (comp) => {\r\n                            this.thingRefs[thing.key] = comp;\r\n                        }}\r\n                        getLinked={ () => {\r\n                            return this.reflectionRefs[thing.key];\r\n                        }}\r\n                    /> );\r\n                })}\r\n\r\n                {this.things.map((thing, index) => {\r\n                    return ( <Reflection\r\n                        key={thing.key}\r\n                        parent={this}\r\n                        _key={thing.key}\r\n                        index={index}\r\n                        onInit={ (comp) => {\r\n                            this.reflectionRefs[thing.key] = comp;\r\n                        }}\r\n                        getLinked={ () => {\r\n                            return this.thingRefs[thing.key];\r\n                        }}\r\n                    /> );\r\n                })}\r\n            </div>\r\n            <canvas\r\n                id=\"shit\"\r\n                width=\"800\"\r\n                height=\"800\"\r\n                ref={ (ele) => {\r\n                    if (ele) {\r\n                        this.c = ele;\r\n                    }\r\n                }}\r\n                style={{\r\n                    border: \"1px solid green\",\r\n                    margin: \"40px auto\",\r\n                }}/>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass AThing extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.props.onInit(this);\r\n\r\n        this.interval = undefined;\r\n\r\n        this.x = this.props.startX !== undefined ? this.props.startX : 100 * Math.random();\r\n        this.y = this.props.startY !== undefined ? this.props.startY : 100 * Math.random();\r\n\r\n        this.steps = 0;\r\n        this.edges = 0;\r\n    }\r\n\r\n    rand = (pos) => {\r\n        let next = pos + 10 * ( ( 2 * Math.random() - 1) );\r\n        if (next < 1 || next > 99) {\r\n            this.edges++;\r\n            next = Math.abs(100 - next);\r\n\r\n            if (this.props.parent.things.length > 55) {\r\n                this.props.parent.dir = -1;\r\n            }\r\n\r\n            if (this.props.parent.things.length < 3) {\r\n                this.props.parent.dir = 1;\r\n            }\r\n\r\n            if (this.props.parent.dir < 0) {\r\n\r\n                if (Math.random() > 0.9) {\r\n                    this.props.parent.del();\r\n                    this.props.parent.forceUpdate();\r\n                }\r\n\r\n            } else {\r\n\r\n                if (Math.random() > 0.5) {\r\n                    for (let x = 0; x < 10; x++) {\r\n                        this.props.parent.insert({\r\n                            startX: this.x,\r\n                            startY: this.y\r\n                        });\r\n                    }\r\n                    this.props.parent.forceUpdate();\r\n                }\r\n            }\r\n        }\r\n        return next;\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.interval = setInterval(() => {\r\n            this.steps++;\r\n            this.x = this.rand(this.x);\r\n            this.y = this.rand(this.y);\r\n            this.forceUpdate();\r\n        }, 500);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n\r\n        // probably not needed... ?\r\n        if (this.interval) {\r\n            clearInterval(this.interval);\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let reflection = this.props.getLinked();\r\n\r\n        if (reflection) {\r\n            reflection.forceUpdate();\r\n        }\r\n\r\n        return (\r\n            <div\r\n                className=\"a-thing\"\r\n                style={{\r\n                    position: \"absolute\",\r\n                    bottom: this.x + \"%\",\r\n                    left: this.y + \"%\",\r\n                    borderRadius: \"10px\",\r\n                    transition: \"all .5s linear\",\r\n                    width: \"5px\",\r\n                    height: \"5px\",\r\n                    background: \"black\"\r\n                }}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nclass Reflection extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.props.onInit(this);\r\n    }\r\n\r\n    render() {\r\n\r\n        let thing = this.props.getLinked() || {};\r\n\r\n        return (\r\n            <div className=\"reflection\" style={{\r\n                fontSize: \"9px\",\r\n            }}>\r\n                {thing.props.index}: {thing.steps}, {thing.edges}\r\n            </div>\r\n        )\r\n    }\r\n}"],"sourceRoot":""}